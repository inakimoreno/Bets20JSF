<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition>
<f:view>
	<h:head>
		<title>Bets</title>
		
	</h:head>
	<h:body>
		<h:form id="nireForm">
			<table>
				<tr>
					<td><h:button value="Atzera" outcome="back"/></td>
				</tr>
				<tr>
				<td><p:calendar id="data" value="#{query.date}" navigator="false" mode="inline">
							<p:ajax event="dateSelect" listener="#{query.onDateSelect}" update="ebentuak buttonBilatu" action="true"></p:ajax>
						</p:calendar></td>
				</tr>
			
			<tr>
			<td><h:selectOneMenu id="ebentuak" value="#{query.ebentua}" converter="omnifaces.SelectItemsConverter" update="buttonBilatu" action="query.setBilatuButton(false)">
					<f:selectItems value="#{query.ebentuak}" />
				</h:selectOneMenu></td> 
			<td>
				<h:commandButton id="buttonBilatu" value="Bilatu" disabled="#{query.bilatuButtonState}"/>
			</td>
				<h:messages id="mezuak" style="color:blue"/>
			</tr>
			</table>

				<td><p:dataTable id="taulaPF" value="#{query.galderak}" var="galdera"
						selectionMode="single" border="1"
						rowKey="#{galdera.questionNumber}">
						<p:ajax event="rowSelect" listener="#{query.onQuestionSelect}"></p:ajax>
 						<p:ajax event="rowSelect" execute="@this" render="nireForm:perfbyselection" />
						<f:facet name="header">Galderak:</f:facet>
						<p:column headerText="Kodea">#{galdera.questionNumber}</p:column>
						<p:column headerText="Galdera">#{galdera.question}</p:column>
					</p:dataTable></td>
					<h:panelGroup id="perfbyselection">
					
			<c:if test="#{login.user!=null}">
						
						<tr><td><h:inputText value="#{bet.option}" /></td></tr>
						<tr><td><h:inputText value="#{bet.amount}" /></td></tr>
						<tr><td><h:commandButton value="Apostua egin" action="#{bet.setBet(query.ebentua.eventNumber,query.galdera,login.user,bet.option,bet.amount)}"/></td></tr>
						
			</c:if>
					
					</h:panelGroup>
			</h:form>
		</h:body>
</f:view>
</ui:composition>
</html>